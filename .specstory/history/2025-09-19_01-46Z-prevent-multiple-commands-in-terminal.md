<!-- Generated by SpecStory -->

# Prevent multiple commands in terminal (2025-09-19 01:46Z)

_**User (2025-09-18 18:15Z)**_

write me a cursor rule that prevents the agent from ever running multiple commands in the same line within a terminal. I don't want to hit this multi allow list state ever again, i want the agent to be able to run self service.

---

_**Assistant**_

I'll create a Cursor rule that prevents the agent from running multiple commands in the same terminal line, which will avoid the multi-allowlist state you encountered.


---



---

I've created a comprehensive Cursor rule that prevents the agent from running multiple commands in the same terminal line. This rule:

## Key Features:

1. **Explicit Prohibition** of command chaining (`&&`, `||`, `;`, `|`)
2. **Clear Examples** showing wrong vs. correct approaches
3. **Implementation Guidelines** for proper command execution
4. **Rationale** explaining why this prevents the multi-allowlist issue

## What This Prevents:

- The exact scenario you encountered: `cd /path && npm ci`
- Any command chaining that triggers Cursor's allowlist system
- Complex command sequences that are hard to debug
- Terminal session management issues

## How It Works:

The rule forces the agent to:
- Run ONE command per terminal call
- Use separate tool calls for each command
- Change directory first, then run the command in a separate call
- Use absolute paths when possible

This should completely eliminate the multi-allowlist state you experienced, allowing the agent to run self-service without hitting Cursor's command approval system for chained commands.

The rule is now active in your workspace and will guide the agent to use proper single-command execution patterns.

---

_**User (2025-09-18 18:15Z)**_

Can you combine the content of @terminal-execution-rules.mdc  into @terminal-best-practices.mdc , then delete @terminal-execution-rules.mdc 

---

_**Assistant**_

I'll combine the terminal execution rules into the terminal best practices file and then delete the separate execution rules file.


---

Read file: undefined

---

Read file: undefined

---

I can see the terminal-best-practices.mdc file has duplicate content. Let me combine both files properly and clean up the duplication:


---



---

Now I'll delete the separate terminal-execution-rules.mdc file:


---

undefined

---

Perfect! I've successfully:

1. **Combined both files** into a single comprehensive `terminal-best-practices.mdc` file that includes:
   - The original terminal best practices for managing long-running processes
   - The new terminal execution rules for single-command-per-line enforcement
   - Updated the description to reflect both purposes

2. **Deleted the separate file** `terminal-execution-rules.mdc` to avoid duplication

3. **Cleaned up the duplication** that was present in the original terminal-best-practices.mdc file

The combined file now provides comprehensive terminal guidance that prevents both:
- **Long-running process blocking** (original content)
- **Multi-command execution** (new content that prevents the allowlist issue you encountered)

This single rule file will ensure the agent follows both sets of best practices while avoiding the multi-allowlist state you experienced.

---

